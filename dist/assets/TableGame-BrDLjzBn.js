import{_ as h}from"./img-avatar-B-YQqMSB.js";import{_ as f,o as i,c as m,b,d as c,e as v,F as P,f as S,n as y,g as $,a as x,h as B,r as k}from"./index-CDAA_Y2u.js";const I={name:"TablePlayer"},M=b("img",{class:"table-player__img",src:h},null,-1),T=[M];function w(o,t,s,e,u,d){return i(),m("div",null,T)}const C=f(I,[["render",w]]),N="/butylochka/assets/img-bottle-water-DJy-IaJ-.png",V={name:"TableGame",components:{TablePlayer:C},setup(){const o=c(!1),t=c(0),s=c([]),e=c(!0),u=5,d=5,_=v(()=>({transform:`translate(-50%, -50%) rotate(${t.value}deg)`,transition:o.value?"transform 3s ease-out":"none"}));return{isSpinning:o,bottleRotation:t,selectedPlayers:s,bottleStyle:_,showBottle:e,getPlayerStyle:a=>{const r=a/10*360,n=150,p=n*Math.cos(r*Math.PI/180),g=n*Math.sin(r*Math.PI/180);return s.value.includes(a)?{position:"absolute",top:"50%",left:`calc(50% + ${s.value.indexOf(a)===0?-50:50}px)`,transform:"translate(-50%, -50%)",transition:"transform 1s ease-out, top 1s ease-out, left 1s ease-out"}:{position:"absolute",top:`calc(50% + ${g}px)`,left:`calc(50% + ${p}px)`,transform:"translate(-50%, -50%)",transition:"transform 1s ease-out"}},isSelectedPlayer:a=>s.value.includes(a),spinBottle:()=>{e.value=!0;const a=360*4;let r,n;do{r=Math.floor(Math.random()*360),t.value+=a+r;const p=(t.value%360+360)%360;n=Math.floor((p+280)/36)%10}while(n===d);o.value=!0,setTimeout(()=>{o.value=!1,s.value=[u,n],e.value=!1},3e3)}}}},z={class:"table-game"},A={class:"table-game__circle"};function F(o,t,s,e,u,d){const _=k("TablePlayer");return i(),m("div",z,[b("div",A,[(i(),m(P,null,S(10,l=>x(_,{key:l,style:y(e.getPlayerStyle(l-1)),class:B({"selected-player":e.isSelectedPlayer(l-1)})},null,8,["style","class"])),64)),e.showBottle?(i(),m("img",{key:0,class:"table-game__bottle",src:N,onClick:t[0]||(t[0]=(...l)=>e.spinBottle&&e.spinBottle(...l)),style:y(e.bottleStyle)},null,4)):$("",!0)])])}const O=f(V,[["render",F]]);export{O as default};
